<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Getting Started on Augmented Reality using Xamarin.Android and MonoGame | Infinitespace Studios</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Getting Started on Augmented Reality using Xamarin.Android and MonoGame" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Xamarin recently published a interview with George Banfill from LinkNode on their Augmented Reality product, you can see the full interview here. Since then I’ve had a number of requests from people wanting to know how to do this using MonoGame and Xamarin.Android. Believe it or not its simpler than you think to get started." />
<meta property="og:description" content="Xamarin recently published a interview with George Banfill from LinkNode on their Augmented Reality product, you can see the full interview here. Since then I’ve had a number of requests from people wanting to know how to do this using MonoGame and Xamarin.Android. Believe it or not its simpler than you think to get started." />
<link rel="canonical" href="http://localhost:4000/general/getting-started-on-argumented-reality-using-xamarin-android-and-monogame/" />
<meta property="og:url" content="http://localhost:4000/general/getting-started-on-argumented-reality-using-xamarin-android-and-monogame/" />
<meta property="og:site_name" content="Infinitespace Studios" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-11-19T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Getting Started on Augmented Reality using Xamarin.Android and MonoGame" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2014-11-19T00:00:00+00:00","datePublished":"2014-11-19T00:00:00+00:00","description":"Xamarin recently published a interview with George Banfill from LinkNode on their Augmented Reality product, you can see the full interview here. Since then I’ve had a number of requests from people wanting to know how to do this using MonoGame and Xamarin.Android. Believe it or not its simpler than you think to get started.","headline":"Getting Started on Augmented Reality using Xamarin.Android and MonoGame","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/general/getting-started-on-argumented-reality-using-xamarin-android-and-monogame/"},"url":"http://localhost:4000/general/getting-started-on-argumented-reality-using-xamarin-android-and-monogame/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom head content - add custom meta tags, analytics, etc. here -->
<link rel="icon" type="image/png" href="/images/isssmall.png">
<link rel="apple-touch-icon" href="/images/isssmall.png">
  </head>
  <body>
    <header class="site-header">
      <div class="header-content">
        <a href="/" class="logo-link">
          <img src="/images/issheader.png" alt="Infinitespace Studios" class="site-logo">
          <span class="site-title">Infinitespace Studios</span>
        </a>
        <nav class="main-nav">
          <ul>
            <li><a href="/">Blog</a></li>
            <li><a href="/games">Games</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/monogame-ports">Ports</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="site-content">
      <div class="container-with-sidebar">
        <div class="main-content">
          <p>Xamarin recently published a interview with George Banfill from <a href="http://linknode.co.uk">LinkNode</a> on their Augmented Reality product, you can see the full interview <a href="http://blog.xamarin.com/app-spotlight-ventusars-augmented-reality-wind-turbines-with-monogame-video/">here</a>. Since then I’ve had a number of requests from people wanting to know how to do this using MonoGame and Xamarin.Android. Believe it or not its simpler than you think to get started.</p>

<p>First thing you need is a class to handle the Camera. Google has done a nice job at giving you a very basic sample of a ‘CameraVew’ <a href="http://developer.android.com/guide/topics/media/camera.html">here</a>. For those of you not wishing to port that over to C# from Java (yuk) here is the code</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CameraView</span> <span class="p">:</span> <span class="n">SurfaceView</span><span class="p">,</span> <span class="n">ISurfaceHolderCallback</span> <span class="p">{</span>
        <span class="n">Camera</span> <span class="n">camera</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">CameraView</span> <span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">Camera</span> <span class="n">camera</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="n">camera</span> <span class="p">=</span> <span class="n">camera</span><span class="p">;</span>
        <span class="n">Holder</span><span class="p">.</span><span class="nf">AddCallback</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="c1">// deprecated setting, but required on </span>
                <span class="c1">// Android versions prior to 3.0</span>
        <span class="n">Holder</span><span class="p">.</span><span class="nf">SetType</span><span class="p">(</span><span class="n">SurfaceType</span><span class="p">.</span><span class="n">PushBuffers</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SurfaceChanged</span> <span class="p">(</span><span class="n">ISurfaceHolder</span> <span class="n">holder</span><span class="p">,</span> <span class="n">Android</span><span class="p">.</span><span class="n">Graphics</span><span class="p">.</span><span class="n">Format</span> <span class="n">format</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Holder</span><span class="p">.</span><span class="n">Surface</span> <span class="p">==</span> <span class="k">null</span><span class="p">){</span>
            <span class="c1">// preview surface does not exist</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">try</span> <span class="p">{</span>
            <span class="n">camera</span><span class="p">.</span><span class="nf">StopPreview</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">){</span>
        <span class="p">}</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">camera</span><span class="p">.</span><span class="nf">SetPreviewDisplay</span><span class="p">(</span><span class="n">Holder</span><span class="p">);</span>
            <span class="n">camera</span><span class="p">.</span><span class="nf">StartPreview</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">){</span>
            <span class="n">Android</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">Log</span><span class="p">.</span><span class="nf">Debug</span> <span class="p">(</span><span class="s">"CameraView"</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span> <span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SurfaceCreated</span> <span class="p">(</span><span class="n">ISurfaceHolder</span> <span class="n">holder</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">camera</span><span class="p">.</span><span class="nf">SetPreviewDisplay</span><span class="p">(</span><span class="n">holder</span><span class="p">);</span>
            <span class="n">camera</span><span class="p">.</span><span class="nf">StartPreview</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Android</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">Log</span><span class="p">.</span><span class="nf">Debug</span> <span class="p">(</span><span class="s">"CameraView"</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span> <span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SurfaceDestroyed</span> <span class="p">(</span><span class="n">ISurfaceHolder</span> <span class="n">holder</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It might not be pretty but it does the job, also it doesn’t handle a flipped view so that will need to be added.</p>

<p>The next step is to figure out how to show MonoGame’s GameWindow and the Camera View at the same time. Again, that is quite easy we can use a FrameLayout like so.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span> <span class="p">(</span><span class="n">Bundle</span> <span class="n">bundle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">OnCreate</span> <span class="p">(</span><span class="n">bundle</span><span class="p">);</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">Activity</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">g</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Game1</span> <span class="p">();</span>
    <span class="n">FrameLayout</span> <span class="n">frameLayout</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FrameLayout</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="n">frameLayout</span><span class="p">.</span><span class="nf">AddView</span> <span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="n">Window</span><span class="p">);</span>  
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">camera</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="nf">Open</span> <span class="p">();</span>
        <span class="n">cameraView</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CameraView</span> <span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">camera</span><span class="p">);</span>
        <span class="n">frameLayout</span><span class="p">.</span><span class="nf">AddView</span> <span class="p">(</span><span class="n">cameraView</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// oops no camera</span>
        <span class="n">Android</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">Log</span><span class="p">.</span><span class="nf">Debug</span> <span class="p">(</span><span class="s">"CameraView"</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span> <span class="p">());</span>
    <span class="p">}</span>
    <span class="nf">SetContentView</span> <span class="p">(</span><span class="n">frameLayout</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="nf">Run</span> <span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is almost the same as the normal MonoGame android code you get, but instead of just setting the ContentView to the game Window directly we just add that and the CameraView to a frame layout and add that. Note that the <strong>order is important</strong>, the last item will be on the bottom so we want to add the game view first so it is over the top of the camera.</p>

<p>Now this won’t work out of the box because there are a couple of other small changes we need. First we need to set the SurfaceFormat of the game Window to Rgba8888, this is because it defaults to a format which does not contain an alpha channel. So if we leave it as is we will not see the camera view underneath the game windows since its opaque. We can change the surface format using</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span><span class="p">.</span><span class="n">Window</span><span class="p">.</span><span class="n">SurfaceFormat</span> <span class="p">=</span> <span class="n">Android</span><span class="p">.</span><span class="n">Graphics</span><span class="p">.</span><span class="n">Format</span><span class="p">.</span><span class="n">Rgba8888</span><span class="p">;</span>
</code></pre></div></div>

<p>We need to do that BEFORE we add that to the frameLayout though. Another thing to note not all devices support Rgba8888, not sure what you do in that case…</p>

<p>The next thing is we need to change our normal Clear colour in Game1 from the standard Color.CornflowerBlue to Color.Transparent</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graphics</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="nf">Clear</span> <span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">Transparent</span><span class="p">);</span>
</code></pre></div></div>

<p>With those changes you should be done. Here is a screenshot, note the Xamarin logo in the top left this is drawn using a standard SpriteBatch call :) All the code for this project is available <a href="https://github.com/infinitespace-studios/Blog/tree/master/InfiniteSpaceStudios.AR">here</a>. I’ve not implemented the iOS version yet as I’m not an “iOS Guy” really, but I will accept pull requests :) <a href="http://www.infinitespace-studios.co.uk/wp-content/uploads/2014/11/Screenshot_2014-11-19-05-40-53-e1416394068418.png"><img src="images/Screenshot_2014-11-19-05-40-53-300x180.png" alt="Screenshot_2014-11-19-05-40-53" /></a></p>

        </div>
        <aside class="games-sidebar">
  <h3>My Games</h3>
  <div class="game-widgets">
    <iframe frameborder="0" src="https://itch.io/embed/4195013?border_width=0&amp;bg_color=000000&amp;fg_color=ffffff&amp;link_color=5becfa" width="206" height="165"><a href="https://infinitespace-studios.itch.io/co-operoids">Co-operoids by infinitespace-studios</a></iframe>
  </div>
  <div class="game-widgets">
    <iframe frameborder="0" src="https://itch.io/embed/120692?border_width=0&amp;bg_color=000000&amp;link_color=5bfa8b&amp;border_color=000000" width="206" height="165"><a href="https://infinitespace-studios.itch.io/vector-rumble">Vector Rumble by infinitespace-studios</a></iframe>
  </div>
</aside>

      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>&copy; 2009-2026 Infinitespace Studios. All rights reserved.</p>
        <div class="social-links">
          <a href="https://github.com/infinitespace-studios" aria-label="GitHub">GitHub</a>
          <a href="https://bsky.app/profile/infspacestudios.bsky.social" aria-label="Bluesky">Bluesky</a>
          <a href="https://mastodon.gamedev.place/@infspacestudios" aria-label="Mastodon">Mastodon</a>
        </div>
      </div>
    </footer>
  </body>
</html>